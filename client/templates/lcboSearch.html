<div>
  <section class="content-header">
    <h1>LCBO Search</h1>
  </section>
  <section class="content">
    <div class="box">
      <div class="box-header">
        <div class="box-title">
          Search your Liqour
        </div>
      </div>
      <div class="box-body">
        <form ng-submit="$ctrl.searchProduct($ctrl.productQuery)">
          <div class="input-group col-xs-12">
            <div class="col-xs-11">
              <input type="text" class="form-control" placeholder="Search..." ng-model="$ctrl.productQuery"/>
            </div>
            <div class="col-xs-1 pull-left">
              <button class="btn bg-green" type="submit"><i class="fas fa-search"></i></button>
            </div>
          </div>
        </form>
        <table ng-if="$ctrl.productInfo.displayTable" class="table table-hover">
          <tbody>
            <tr>
              <th>
                Name
              </th>
              <th>
                Package Size
              </th>
              <th>
                Logo
              </th>
            </tr>
            <tr ng-repeat="product in $ctrl.productInfo.result">
              <td>
                <a class="product-name" title="Click to view stores with availibility" ng-click="$ctrl.findProduct(product.id)">{{product.name}}</a>
              </td>
              <td>
                {{product.package}}
              </td>
              <td>
                <img ng-src="{{product.image_thumb_url}}" alt="product image" height="42" width="42">
              </td>
            </tr>
          </tbody>
        </table>
        <p ng-if="!$ctrl.productInfo.displayTable" class="lead">
          {{$ctrl.productInfo.err}}
        </p>
      </div>
    </div>
    <div ng-if="$ctrl.storeInfo.displayTable" class="box">
      <div class="box-body">
        <table  class="table table-hover">
          <tbody>
            <tr>
              <th>
                Name
              </th>
              <th>
                Location
              </th>
              <th>
                Quantity
              </th>
              <th>
                Distance (km)
              </th>
            </tr>
            <tr ng-repeat="store in $ctrl.storeInfo.result">
              <td>
                {{store.name}}
              </td>
              <td>
                {{store.address_line_1}}
              </td>
              <td>
                {{store.quantity}}
              </td>
              <td>
                {{store.distance_in_meters / 1000}}
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div class="box" ng-if="$ctrl.storeInfo && !$ctrl.storeInfo.displayTable">
      <div class="box-body">
        <p class="lead">
          {{$ctrl.productInfo.err}}
        </p>
      </div>
    </div>
  </section>
</div>
